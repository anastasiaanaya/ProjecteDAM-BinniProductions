.navigation-menu {
    display: flex;
    align-items: center;
    position: fixed;
    margin-left: 28px;
    margin-right: 28px;
    bottom: 28px;
    width: calc(100% - 56px);
    box-sizing: border-box;
}

/* keep some gap between the pages block and the search bar */
.navigation-menu {
    gap: 12px;
}

.navigation-pages {
    background-color: #5C694D;
    height: 48px;
    width: 140px;
    border-radius: 48px;
    display: flex;
    align-items: center;
    position: relative;
    flex-shrink: 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.navigation-pages.contracted {
    width: 48px;
    height: 48px;
    background-color: #5C694D;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: width 0.3s ease, border-radius 0.3s ease;
    padding: 0;
}

.contracted-page {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.home-page {
    width: 50%;
    height: 100%;
    float: left;
    position: relative;
    z-index: 1;
}

.favourites-page {
    width: 50%;
    height: 100%;
    float: right;
    position: relative;
    z-index: 1;
}

.selected-page:before {
    background-color: #D1CBA9;
    height: 44px;
    width: 100%;
    border-radius: 46px;
    position: absolute;
    content: "";
    border: 2px solid #5C694D;
}

.search-bar {
    background-color: #5C694D;
    height: 48px;
    width: 48px;
    margin-left: auto;
    margin-right: 0;
    border-radius: 48px;
    display: flex;
    justify-content: center;
    transition: width 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

.search-bar.expanded {
    /* mobile / small screens: keep a reasonable fixed width */
    width: 270px;
    justify-content: flex-start;
    padding-left: 12px;
    background-color: #D1CBA9;
}

/* On wider screens let the search area grow to fill the available space
   leaving room for the navigation-pages block. The max-width calcs
   ensure a visible margin between elements on different breakpoints. */
@media (min-width: 768px) {
    .search-bar.expanded {
        width: auto;
        flex: 1 1 auto;
        /* leave a bit more room by default so the expanded search keeps
           a comfortable gap from the pages pill */
        max-width: calc(100% - 220px);
    }
}

@media (min-width: 1024px) {
    .search-bar.expanded {
        /* on large desktops leave a bit more room */
        max-width: calc(100% - 220px);
    }
}

/* Center the whole navigation group on larger screens while keeping
     the left-aligned layout on mobile. */
@media (min-width: 768px) {
    .navigation-menu {
        /* center the fixed navigation container without using transform so
           fixed-position children remain positioned relative to the
           viewport (avoids creating a transform-containing block). */
        left: 0;
        right: 0;
        margin-left: auto;
        margin-right: auto;
        /* keep the same visual padding but let max-width cap expansion */
        width: calc(100% - 56px);
        max-width: 1200px;
        padding-left: 28px;
        padding-right: 28px;
        box-sizing: border-box;
        transform: none;
    }

    /* put the pages pill back into the normal flow and center it */
    .navigation-pages {
        position: relative;
        left: auto;
        transform: none;
        margin: 0 auto;
        z-index: 2;
    }

    /* keep the search icon fixed to the right edge of the centered container */
    /* Keep the search visually stuck to the right edge of the viewport
       on wide screens. Using fixed positioning ensures it always stays
       glued to the right, independent of the centered container width. */
    .search-bar {
        position: fixed;
        right: 28px;
        bottom: 28px;
        top: auto;
        transform: none;
        z-index: 3;
    }

    /* make the expanded search adapt to viewport size but stay within
       reasonable min/max bounds so it never overlaps or overflows */
    .search-bar.expanded {
        /* Use min() inside clamp so the expanded search never becomes
           wider than roughly half the viewport minus a gap (160px).
           This prevents it from touching the centered pages pill. */
        width: clamp(270px, min(36vw, calc(50vw - 160px)), 640px);
    }

    /* On desktop keep the pages pill from collapsing to the contracted
       circular form when the search opens â€” keep its normal width. */
    .navigation-pages.contracted {
        width: 140px;
        height: 48px;
        border-radius: 48px;
        padding: 0 8px;
        transition: none;
    }
}


.search-bar .search-icon {
    color: white;
    font-size: 32px;
    line-height: 48px;
    text-align: center;
    cursor: pointer;
    min-width: 48px; 
}

.search-bar.expanded .search-icon {
    color: #5C694D;
}

.search-input {
    width: 100%; 
    height: 32px;
    border-radius: 16px;
    border: none;
    padding: 0 12px 0 0;
    font-size: 16px;
    outline: none;
    margin-top: 8px;
    background: transparent;
    color: #5C694D;
    white-space: nowrap;
}

.totoro-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 24px;
}

.heart-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 28px;
}

.sliding-marker {
  position: absolute;
  top: 50%;
  left: 0;
  width: 50%;
  height: 48px;
  background-color: #D1CBA9;
  border-radius: 46px;
  border: 2px solid #5C694D;
  z-index: 0;
  pointer-events: none;
  transition: left 0.3s cubic-bezier(0.4,0,0.2,1), transform 0.3s cubic-bezier(0.4,0,0.2,1);
  transform: translateY(-50%);
  box-sizing: border-box;
}

.sliding-marker.favourites {
  left: 50%;
}

.sliding-marker.home {
  left: 0;
}